# Troy BBQ - Environment Configuration Template
# Copy this file to .env and fill in your actual values
# NEVER commit .env files with real secrets to version control

# === DATABASE CONFIGURATION ===
# NeonDB PostgreSQL connection string
DATABASE_URL="postgresql://username:password@hostname:port/database?sslmode=require&channel_binding=require"

# Database connection pool settings
DATABASE_MAX_CONNECTIONS=20
DATABASE_IDLE_TIMEOUT=30000
DATABASE_CONNECTION_TIMEOUT=10000

# === MEDUSAJS CONFIGURATION ===
# MedusaJS backend URL
MEDUSA_BACKEND_URL="http://localhost:9000"

# MedusaJS publishable API key (for store endpoints)
MEDUSA_PUBLISHABLE_KEY="pk_test_your_publishable_key_here"

# MedusaJS admin API key (for admin operations)
MEDUSA_ADMIN_API_KEY="sk_your_admin_api_key_here"

# === SECURITY CONFIGURATION ===
# JWT secret for token signing (MUST be at least 32 characters)
JWT_SECRET="your-super-secure-jwt-secret-minimum-32-characters-long"

# Admin authentication
ADMIN_EMAIL="admin@troybbq.com"
ADMIN_PASSWORD_HASH="$2b$12$your_bcrypt_hashed_password_here"

# Session security
SESSION_SECRET="your-session-secret-for-additional-security"
SESSION_MAX_AGE=86400000

# CSRF protection
CSRF_SECRET="your-csrf-secret-for-form-protection"

# === PAYMENT PROVIDER CONFIGURATION ===
# Stripe Configuration
STRIPE_PUBLISHABLE_KEY="pk_test_your_stripe_publishable_key"
STRIPE_SECRET_KEY="sk_test_your_stripe_secret_key"
STRIPE_WEBHOOK_SECRET="whsec_your_stripe_webhook_secret"

# Square Configuration
SQUARE_APPLICATION_ID="your_square_application_id"
SQUARE_ACCESS_TOKEN="your_square_access_token"
SQUARE_WEBHOOK_SIGNATURE_KEY="your_square_webhook_signature_key"
SQUARE_ENVIRONMENT="sandbox"

# === EMAIL CONFIGURATION ===
# Resend API configuration
RESEND_API_KEY="re_your_resend_api_key"
RESEND_FROM_EMAIL="noreply@troybbq.com"

# Email security
EMAIL_RATE_LIMIT_PER_HOUR=100
EMAIL_BLACKLIST_DOMAINS="tempmail.com,10minutemail.com"

# === SECURITY RATE LIMITING ===
# API rate limiting
API_RATE_LIMIT_REQUESTS=100
API_RATE_LIMIT_WINDOW_MS=900000

# Admin rate limiting (more restrictive)
ADMIN_RATE_LIMIT_REQUESTS=50
ADMIN_RATE_LIMIT_WINDOW_MS=900000

# Login attempt limiting
LOGIN_RATE_LIMIT_ATTEMPTS=5
LOGIN_RATE_LIMIT_WINDOW_MS=900000

# === FILE UPLOAD SECURITY ===
# File upload limits
MAX_FILE_SIZE=5242880
ALLOWED_FILE_TYPES="image/jpeg,image/png,image/webp,image/gif,application/pdf"
UPLOAD_DIRECTORY="/uploads"

# === MONITORING & LOGGING ===
# Application environment
NODE_ENV="production"

# Logging configuration
LOG_LEVEL="info"
LOG_FILE="/var/log/troybbq/app.log"
LOG_MAX_SIZE=10485760
LOG_MAX_FILES=5

# Performance monitoring
ENABLE_PERFORMANCE_MONITORING=true
PERFORMANCE_SAMPLE_RATE=0.1

# Error tracking
SENTRY_DSN="https://your_sentry_dsn@sentry.io/project_id"
SENTRY_ENVIRONMENT="production"

# === CACHING CONFIGURATION ===
# Redis configuration (for production caching)
REDIS_URL="redis://localhost:6379"
REDIS_PASSWORD="your_redis_password"

# Cache TTL settings (in seconds)
CACHE_TTL_SHORT=300
CACHE_TTL_MEDIUM=3600
CACHE_TTL_LONG=86400

# === THIRD-PARTY INTEGRATIONS ===
# Google Analytics
GA_MEASUREMENT_ID="G-XXXXXXXXXX"

# Google Maps (if needed for location services)
GOOGLE_MAPS_API_KEY="your_google_maps_api_key"

# === SECURITY HEADERS CONFIGURATION ===
# Content Security Policy overrides
CSP_REPORT_URI="https://troybbq.report-uri.com/r/d/csp/enforce"
CSP_REPORT_ONLY=false

# HSTS configuration
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true
HSTS_PRELOAD=true

# === BACKUP CONFIGURATION ===
# Database backup settings
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET="troybbq-backups"
BACKUP_S3_REGION="us-east-1"

# === DEPLOYMENT CONFIGURATION ===
# Vercel-specific environment variables
VERCEL_URL=""
VERCEL_GIT_COMMIT_SHA=""
VERCEL_ENV=""

# Health check configuration
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_TIMEOUT=5000

# === DEVELOPMENT ONLY ===
# Development-specific settings (DO NOT use in production)
DISABLE_SSL_VERIFICATION=false
ENABLE_DEBUG_LOGGING=false
MOCK_PAYMENT_PROVIDERS=false